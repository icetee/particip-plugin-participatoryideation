<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd
           http://www.springframework.org/schema/tx
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
">

	<!-- DAO beans -->

    <bean id="participatoryideation.depositaireTypeDAO"       class="fr.paris.lutece.plugins.participatoryideation.business.DepositaireTypeDAO" />  
    <bean id="participatoryideation.campagneDepositaireDAO"   class="fr.paris.lutece.plugins.participatoryideation.business.CampagneDepositaireDAO" />  
    <bean id="participatoryideation.ideeDAO"                  class="fr.paris.lutece.plugins.participatoryideation.business.IdeeDAO" />  
    <bean id="participatoryideation.linkDAO"                  class="fr.paris.lutece.plugins.participatoryideation.business.LinkDAO" />  
    
	<!-- Services beans -->

	<bean id="participatoryideation.solrIdeeIndexer"          class="fr.paris.lutece.plugins.participatoryideation.service.SolrIdeeIndexer" />
	
	<bean id="participatoryideation.ideeService"              class="fr.paris.lutece.plugins.participatoryideation.service.IdeeService" />  
	<bean id="participatoryideation.ideationStaticService"    class="fr.paris.lutece.plugins.participatoryideation.service.IdeationStaticService" />
	<bean id="participatoryideation.linkStaticService"        class="fr.paris.lutece.plugins.participatoryideation.service.LinkStaticService" />
	<bean id="participatoryideation.ideeWSService"            class="fr.paris.lutece.plugins.participatoryideation.service.IdeeWSService" /> 


	<bean id="participatoryideation.ideationCampaignService"  class="fr.paris.lutece.plugins.participatoryideation.service.campaign.IdeationCampaignService" />
	<!-- <bean id="participatoryideation.ideationCampaignService"  class="fr.paris.lutece.plugins.participatoryideation.service.campaign.IdeationCampaignFromParticipatoryBudgetService" /> -->

	<bean id="participatoryideation.myInfosService"  class="fr.paris.lutece.plugins.participatoryideation.service.myinfos.MyInfosService" />
	<!-- <bean id="participatoryideation.myInfosService"  class="fr.paris.lutece.plugins.participatoryideation.service.myinfos.MyInfosFromParticipatoryBudgetService" /> -->

    <!-- Site properties -->
    
    <bean id="participatoryideation.FormSitePropertiesGroup" class="fr.paris.lutece.portal.service.site.properties.SitePropertiesGroup" >
        <property name="nameKey"><value>ideation.form.site_properties.name</value></property>
        <property name="descriptionKey"><value>ideation.form.site_properties.description</value></property>
        <property name="keysPrefix"><value>ideation.site_property.form</value></property>
    </bean>
    
    <bean id="participatoryideation.IdeeSitePropertiesGroup" class="fr.paris.lutece.portal.service.site.properties.SitePropertiesGroup" >
        <property name="nameKey"><value>ideation.view_idee.site_properties.name</value></property>
        <property name="descriptionKey"><value>ideation.view_idee.site_properties.description</value></property>
        <property name="keysPrefix"><value>ideation.site_property.view_idee</value></property>
    </bean>

    <!-- Leaflet maps -->
    
	<bean id="leaflet-icon-provider-idee" class="fr.paris.lutece.plugins.participatoryideation.service.IdeeIconProvider" />
	<bean id="leaflet-rest-popup-provider-idee" class="fr.paris.lutece.plugins.participatoryideation.service.IdeePopupContentProvider" />

    <!-- AsynchronousUpload -->
    
	<bean id="participatoryideation.IdeeAsynchronousHandler" class="fr.paris.lutece.plugins.participatoryideation.service.IdeationUploadHandler" />

	<bean id="participatoryideation.IdeationSolrAddon" class="fr.paris.lutece.plugins.participatoryideation.service.IdeationSolrAddon" />

    <!-- SQL Transactions -->
    
    <tx:annotation-driven/>
    
    <bean id="participatoryideation.ideeServiceTransactionManager" class="fr.paris.lutece.portal.service.database.DAOUtilTransactionManager">
    	<property name="pluginName" value="participatoryideation"/>
    </bean>
    
	<bean id="participatoryideation.ideeExtendableResourceService"       class="fr.paris.lutece.plugins.participatoryideation.service.IdeeExtendableResourceService" />
	<bean id="participatoryideation.ideationSubscriptionProviderService" class="fr.paris.lutece.plugins.participatoryideation.service.subscription.IdeationSubscriptionProviderService"/>

	<!-- Components -->
	
	<bean id="participatoryideation.followAddon" class="fr.paris.lutece.plugins.participatoryideation.service.FollowAddService" />

    <!-- WS REST -->
    
    <bean id='participatoryideation.hashService' class='fr.paris.lutece.util.signrequest.security.Sha1HashService' />
    
    <bean id='participatoryideation.requestAuthentication' class='fr.paris.lutece.util.signrequest.HeaderHashAuthenticator' >
          <property name='hashService' ref='participatoryideation.hashService' />
          <property name='signatureElements'>
              <list>
                  <!-- <value>change me</value> -->
              </list>
          </property>
          <property name='privateKey'>
               <value>change me</value>
          </property>
     </bean>

	<bean id="participatoryideation.webServiceCaller" class="fr.paris.lutece.plugins.participatoryideation.utils.http.WebServiceCaller" />

	<bean id="taskNotifyIdeationConfigDAO" class="fr.paris.lutece.plugins.participatoryideation.business.notify.TaskNotifyIdeationConfigDAO" />
	
	<!-- TaskInfoProvider -->
	<bean id="participatoryideation.notifyIdeationTaskInfoProvider" class="fr.paris.lutece.plugins.participatoryideation.service.notify.NotifyIdeationTaskInfoProvider"
		p:taskType-ref="participatoryideation.taskTypeNotifyIdeation" />

		
     <!-- Task -->
     <bean id="participatoryideation.taskTypeNotifyIdeation" class="fr.paris.lutece.plugins.workflowcore.business.task.TaskType"
         p:key="taskNotifyIdeation"
         p:titleI18nKey="module.workflow.ideation.task_notify_ideation_title"
         p:beanName="participatoryideation.taskNotifyIdeation"
         p:configRequired="true"
         p:configBeanName="participatoryideation.taskNotifyIdeationConfig"
         p:taskForAutomaticAction="true" />
         
    <bean id="participatoryideation.notifyIdeationTaskComponent" class="fr.paris.lutece.plugins.participatoryideation.web.notify.NotifyIdeationTaskComponent"
   		p:taskType-ref="participatoryideation.taskTypeNotifyIdeation"
   		p:taskConfigService-ref="participatoryideation.taskNotifyIdeationConfigService" />


   	<bean id="participatoryideation.taskNotifyIdeationConfigService" class="fr.paris.lutece.plugins.participatoryideation.service.notify.TaskNotifyIdeationConfigService"
   		p:taskConfigDAO-ref="taskNotifyIdeationConfigDAO" />
     <bean id="participatoryideation.taskNotifyIdeation" class="fr.paris.lutece.plugins.participatoryideation.service.notify.TaskNotifyIdeation" scope="prototype" />
 	 <bean id="participatoryideation.taskNotifyIdeationConfig" class="fr.paris.lutece.plugins.participatoryideation.business.notify.TaskNotifyIdeationConfig" scope="prototype" />

     <!-- Task Change idee status-->
    <bean id="participatoryideation.taskChangeIdeeStatusConfigDAO" class="fr.paris.lutece.plugins.participatoryideation.business.notify.TaskChangeIdeeStatusConfigDAO"/>
    
	<bean id="participatoryideation.taskChangeIdeeStatus" class="fr.paris.lutece.plugins.participatoryideation.service.notify.TaskChangeIdeeStatus" scope="prototype" />
 	<bean id="participatoryideation.taskChangeIdeeStatusConfig" class="fr.paris.lutece.plugins.participatoryideation.business.notify.TaskChangeIdeeStatusConfig" scope="prototype" />
	<bean id="participatoryideation.taskChangeIdeeStatusConfigService"    class="fr.paris.lutece.plugins.participatoryideation.service.notify.TaskNotifyIdeationConfigService"
		p:taskConfigDAO-ref="participatoryideation.taskChangeIdeeStatusConfigDAO" />

 <!-- Task -->
     <bean id="participatoryideation.taskTypeChangeIdeeStatus" class="fr.paris.lutece.plugins.workflowcore.business.task.TaskType"
         p:key="taskChangeIdeeStatus"
         p:titleI18nKey="module.workflow.ideation.task_change_idee_status.title"
         p:beanName="participatoryideation.taskChangeIdeeStatus"
         p:configRequired="true"
         p:configBeanName="participatoryideation.taskChangeIdeeStatusConfig"
         p:taskForAutomaticAction="true" />


 	<bean id="participatoryideation.changeIdeeStatusTaskComponent" class="fr.paris.lutece.plugins.participatoryideation.web.notify.ChangeIdeeStatusTaskComponent"
		p:taskType-ref="participatoryideation.taskTypeChangeIdeeStatus"
		p:taskConfigService-ref="participatoryideation.taskChangeIdeeStatusConfigService" />
</beans>