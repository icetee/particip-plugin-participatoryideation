<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd
           http://www.springframework.org/schema/tx
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
">


    <bean id="ideation.depositaireTypeDAO"  class="fr.paris.lutece.plugins.ideation.business.DepositaireTypeDAO" />  
    <bean id="ideation.campagneDepositaireDAO"  class="fr.paris.lutece.plugins.ideation.business.CampagneDepositaireDAO" />  
    <bean id="ideation.ideeDAO"  class="fr.paris.lutece.plugins.ideation.business.IdeeDAO" />  
    <bean id="ideation.foTagDAO"  class="fr.paris.lutece.plugins.ideation.business.FoTagDAO" />  
    <bean id="ideation.boTagDAO"  class="fr.paris.lutece.plugins.ideation.business.BoTagDAO" />  
    <bean id="ideation.linkDAO"  class="fr.paris.lutece.plugins.ideation.business.LinkDAO" />  
	<bean id="ideation.solrIdeeIndexer" class="fr.paris.lutece.plugins.ideation.service.SolrIdeeIndexer" />
	<bean id="ideation.ideationCampagneService"  class="fr.paris.lutece.plugins.ideation.service.IdeationCampagneService" />  
	<bean id="ideation.ideeService"  class="fr.paris.lutece.plugins.ideation.service.IdeeService" />  
	<bean id="ideation.ideationStaticService"  class="fr.paris.lutece.plugins.ideation.service.IdeationStaticService" />
	<bean id="ideation.linkStaticService"  class="fr.paris.lutece.plugins.ideation.service.LinkStaticService" />
	<bean id="ideation.ideeWSService"  class="fr.paris.lutece.plugins.ideation.service.IdeeWSService" /> 

    <!-- Site properties -->
    <bean id="ideation.FormSitePropertiesGroup" class="fr.paris.lutece.portal.service.site.properties.SitePropertiesGroup" >
        <property name="nameKey"><value>ideation.form.site_properties.name</value></property>
        <property name="descriptionKey"><value>ideation.form.site_properties.description</value></property>
        <property name="keysPrefix"><value>ideation.site_property.form</value></property>
    </bean>
    <bean id="ideation.IdeeSitePropertiesGroup" class="fr.paris.lutece.portal.service.site.properties.SitePropertiesGroup" >
        <property name="nameKey"><value>ideation.view_idee.site_properties.name</value></property>
        <property name="descriptionKey"><value>ideation.view_idee.site_properties.description</value></property>
        <property name="keysPrefix"><value>ideation.site_property.view_idee</value></property>
    </bean>

    <!-- leaflet maps -->
	<bean id="leaflet-icon-provider-idee" class="fr.paris.lutece.plugins.ideation.service.IdeeIconProvider" />
	<bean id="leaflet-rest-popup-provider-idee" class="fr.paris.lutece.plugins.ideation.service.IdeePopupContentProvider" />

    <!-- AsynchronousUpload -->
	<bean id="ideation.IdeeAsynchronousHandler" class="fr.paris.lutece.plugins.ideation.service.IdeationUploadHandler" />

	<bean id="ideation.IdeationSolrAddon" class="fr.paris.lutece.plugins.ideation.service.IdeationSolrAddon" />

    <!-- SQL Transactions -->
    <tx:annotation-driven/>
    <bean id="ideation.ideeServiceTransactionManager" class="fr.paris.lutece.portal.service.database.DAOUtilTransactionManager"><property name="pluginName" value="ideation"/></bean>
	 <bean id="ideation.ideeExtendableResourceService" class="fr.paris.lutece.plugins.ideation.service.IdeeExtendableResourceService" />
	 <bean id="ideation.ideationSubscriptionProviderService" class="fr.paris.lutece.plugins.ideation.service.subscription.IdeationSubscriptionProviderService"/>

	<!-- Components -->
	<bean id="ideation.followAddon" class="fr.paris.lutece.plugins.ideation.service.FollowAddService" />






	<bean id="taskNotifyIdeationConfigDAO" class="fr.paris.lutece.plugins.workflow.modules.ideation.business.TaskNotifyIdeationConfigDAO"/>
	
	<!-- TaskInfoProvider -->
	<bean id="workflow-ideation.notifyIdeationTaskInfoProvider" class="fr.paris.lutece.plugins.workflow.modules.ideation.service.taskinfo.NotifyIdeationTaskInfoProvider"
		p:taskType-ref="workflow-ideation.taskTypeNotifyIdeation" />

		
     <!-- Task -->
     <bean id="workflow-ideation.taskTypeNotifyIdeation" class="fr.paris.lutece.plugins.workflowcore.business.task.TaskType"
         p:key="taskNotifyIdeation"
         p:titleI18nKey="module.workflow.ideation.task_notify_ideation_title"
         p:beanName="workflow-ideation.taskNotifyIdeation"
         p:configRequired="true"
         p:configBeanName="workflow-ideation.taskNotifyIdeationConfig"
         p:taskForAutomaticAction="true" />
         
    <bean id="workflow-ideation.notifyIdeationTaskComponent" class="fr.paris.lutece.plugins.workflow.modules.ideation.web.NotifyIdeationTaskComponent"
   		p:taskType-ref="workflow-ideation.taskTypeNotifyIdeation"
   		p:taskConfigService-ref="workflow-ideation.taskNotifyIdeationConfigService" />


   	<bean id="workflow-ideation.taskNotifyIdeationConfigService" class="fr.paris.lutece.plugins.workflow.modules.ideation.service.TaskNotifyIdeationConfigService"
   		p:taskConfigDAO-ref="taskNotifyIdeationConfigDAO" />
     <bean id="workflow-ideation.taskNotifyIdeation" class="fr.paris.lutece.plugins.workflow.modules.ideation.service.TaskNotifyIdeation" scope="prototype" />
 	 <bean id="workflow-ideation.taskNotifyIdeationConfig" class="fr.paris.lutece.plugins.workflow.modules.ideation.business.TaskNotifyIdeationConfig" scope="prototype" />

     <!-- Task Change idee status-->
    <bean id="workflow-ideation.taskChangeIdeeStatusConfigDAO" class="fr.paris.lutece.plugins.workflow.modules.ideation.business.TaskChangeIdeeStatusConfigDAO"/>
    
	<bean id="workflow-ideation.taskChangeIdeeStatus" class="fr.paris.lutece.plugins.workflow.modules.ideation.service.TaskChangeIdeeStatus" scope="prototype" />
 	<bean id="workflow-ideation.taskChangeIdeeStatusConfig" class="fr.paris.lutece.plugins.workflow.modules.ideation.business.TaskChangeIdeeStatusConfig" scope="prototype" />
	<bean id="workflow-ideation.taskChangeIdeeStatusConfigService"    class="fr.paris.lutece.plugins.workflow.modules.ideation.service.TaskNotifyIdeationConfigService"
		p:taskConfigDAO-ref="workflow-ideation.taskChangeIdeeStatusConfigDAO" />

 <!-- Task -->
     <bean id="workflow-ideation.taskTypeChangeIdeeStatus" class="fr.paris.lutece.plugins.workflowcore.business.task.TaskType"
         p:key="taskChangeIdeeStatus"
         p:titleI18nKey="module.workflow.ideation.task_change_idee_status.title"
         p:beanName="workflow-ideation.taskChangeIdeeStatus"
         p:configRequired="true"
         p:configBeanName="workflow-ideation.taskChangeIdeeStatusConfig"
         p:taskForAutomaticAction="true" />


 	<bean id="workflow-ideation.changeIdeeStatusTaskComponent" class="fr.paris.lutece.plugins.workflow.modules.ideation.web.ChangeIdeeStatusTaskComponent"
		p:taskType-ref="workflow-ideation.taskTypeChangeIdeeStatus"
		p:taskConfigService-ref="workflow-ideation.taskChangeIdeeStatusConfigService" />
</beans>