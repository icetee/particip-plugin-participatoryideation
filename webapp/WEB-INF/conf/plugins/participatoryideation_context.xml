<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd
           http://www.springframework.org/schema/tx
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
">


    <bean id="ideation.depositaireTypeDAO"  class="fr.paris.lutece.plugins.participatoryideation.business.DepositaireTypeDAO" />  
    <bean id="ideation.campagneDepositaireDAO"  class="fr.paris.lutece.plugins.participatoryideation.business.CampagneDepositaireDAO" />  
    <bean id="ideation.ideeDAO"  class="fr.paris.lutece.plugins.participatoryideation.business.IdeeDAO" />  
    <bean id="ideation.linkDAO"  class="fr.paris.lutece.plugins.participatoryideation.business.LinkDAO" />  
	<bean id="ideation.solrIdeeIndexer" class="fr.paris.lutece.plugins.participatoryideation.service.SolrIdeeIndexer" />
	<bean id="ideation.ideationCampagneService"  class="fr.paris.lutece.plugins.participatoryideation.service.IdeationCampagneService" />  
	<bean id="ideation.ideeService"  class="fr.paris.lutece.plugins.participatoryideation.service.IdeeService" />  
	<bean id="ideation.ideationStaticService"  class="fr.paris.lutece.plugins.participatoryideation.service.IdeationStaticService" />
	<bean id="ideation.linkStaticService"  class="fr.paris.lutece.plugins.participatoryideation.service.LinkStaticService" />
	<bean id="ideation.ideeWSService"  class="fr.paris.lutece.plugins.participatoryideation.service.IdeeWSService" /> 

    <!-- Site properties -->
    <bean id="ideation.FormSitePropertiesGroup" class="fr.paris.lutece.portal.service.site.properties.SitePropertiesGroup" >
        <property name="nameKey"><value>ideation.form.site_properties.name</value></property>
        <property name="descriptionKey"><value>ideation.form.site_properties.description</value></property>
        <property name="keysPrefix"><value>ideation.site_property.form</value></property>
    </bean>
    <bean id="ideation.IdeeSitePropertiesGroup" class="fr.paris.lutece.portal.service.site.properties.SitePropertiesGroup" >
        <property name="nameKey"><value>ideation.view_idee.site_properties.name</value></property>
        <property name="descriptionKey"><value>ideation.view_idee.site_properties.description</value></property>
        <property name="keysPrefix"><value>ideation.site_property.view_idee</value></property>
    </bean>

    <!-- leaflet maps -->
	<bean id="leaflet-icon-provider-idee" class="fr.paris.lutece.plugins.participatoryideation.service.IdeeIconProvider" />
	<bean id="leaflet-rest-popup-provider-idee" class="fr.paris.lutece.plugins.participatoryideation.service.IdeePopupContentProvider" />

    <!-- AsynchronousUpload -->
	<bean id="ideation.IdeeAsynchronousHandler" class="fr.paris.lutece.plugins.participatoryideation.service.IdeationUploadHandler" />

	<bean id="ideation.IdeationSolrAddon" class="fr.paris.lutece.plugins.participatoryideation.service.IdeationSolrAddon" />

    <!-- SQL Transactions -->
    <tx:annotation-driven/>
    <bean id="ideation.ideeServiceTransactionManager" class="fr.paris.lutece.portal.service.database.DAOUtilTransactionManager"><property name="pluginName" value="ideation"/></bean>
	 <bean id="ideation.ideeExtendableResourceService" class="fr.paris.lutece.plugins.participatoryideation.service.IdeeExtendableResourceService" />
	 <bean id="ideation.ideationSubscriptionProviderService" class="fr.paris.lutece.plugins.participatoryideation.service.subscription.IdeationSubscriptionProviderService"/>

	<!-- Components -->
	<bean id="ideation.followAddon" class="fr.paris.lutece.plugins.participatoryideation.service.FollowAddService" />






	<bean id="taskNotifyIdeationConfigDAO" class="fr.paris.lutece.plugins.participatoryideation.business.notify.TaskNotifyIdeationConfigDAO"/>
	
	<!-- TaskInfoProvider -->
	<bean id="participatoryideation.notifyIdeationTaskInfoProvider" class="fr.paris.lutece.plugins.participatoryideation.service.notify.NotifyIdeationTaskInfoProvider"
		p:taskType-ref="participatoryideation.taskTypeNotifyIdeation" />

		
     <!-- Task -->
     <bean id="participatoryideation.taskTypeNotifyIdeation" class="fr.paris.lutece.plugins.workflowcore.business.task.TaskType"
         p:key="taskNotifyIdeation"
         p:titleI18nKey="module.workflow.ideation.task_notify_ideation_title"
         p:beanName="participatoryideation.taskNotifyIdeation"
         p:configRequired="true"
         p:configBeanName="participatoryideation.taskNotifyIdeationConfig"
         p:taskForAutomaticAction="true" />
         
    <bean id="participatoryideation.notifyIdeationTaskComponent" class="fr.paris.lutece.plugins.participatoryideation.web.notify.NotifyIdeationTaskComponent"
   		p:taskType-ref="participatoryideation.taskTypeNotifyIdeation"
   		p:taskConfigService-ref="participatoryideation.taskNotifyIdeationConfigService" />


   	<bean id="participatoryideation.taskNotifyIdeationConfigService" class="fr.paris.lutece.plugins.participatoryideation.service.notify.TaskNotifyIdeationConfigService"
   		p:taskConfigDAO-ref="taskNotifyIdeationConfigDAO" />
     <bean id="participatoryideation.taskNotifyIdeation" class="fr.paris.lutece.plugins.participatoryideation.service.notify.TaskNotifyIdeation" scope="prototype" />
 	 <bean id="participatoryideation.taskNotifyIdeationConfig" class="fr.paris.lutece.plugins.participatoryideation.business.notify.TaskNotifyIdeationConfig" scope="prototype" />

     <!-- Task Change idee status-->
    <bean id="participatoryideation.taskChangeIdeeStatusConfigDAO" class="fr.paris.lutece.plugins.participatoryideation.business.notify.TaskChangeIdeeStatusConfigDAO"/>
    
	<bean id="participatoryideation.taskChangeIdeeStatus" class="fr.paris.lutece.plugins.participatoryideation.service.notify.TaskChangeIdeeStatus" scope="prototype" />
 	<bean id="participatoryideation.taskChangeIdeeStatusConfig" class="fr.paris.lutece.plugins.participatoryideation.business.notify.TaskChangeIdeeStatusConfig" scope="prototype" />
	<bean id="participatoryideation.taskChangeIdeeStatusConfigService"    class="fr.paris.lutece.plugins.participatoryideation.service.notify.TaskNotifyIdeationConfigService"
		p:taskConfigDAO-ref="participatoryideation.taskChangeIdeeStatusConfigDAO" />

 <!-- Task -->
     <bean id="participatoryideation.taskTypeChangeIdeeStatus" class="fr.paris.lutece.plugins.workflowcore.business.task.TaskType"
         p:key="taskChangeIdeeStatus"
         p:titleI18nKey="module.workflow.ideation.task_change_idee_status.title"
         p:beanName="participatoryideation.taskChangeIdeeStatus"
         p:configRequired="true"
         p:configBeanName="participatoryideation.taskChangeIdeeStatusConfig"
         p:taskForAutomaticAction="true" />


 	<bean id="participatoryideation.changeIdeeStatusTaskComponent" class="fr.paris.lutece.plugins.participatoryideation.web.notify.ChangeIdeeStatusTaskComponent"
		p:taskType-ref="participatoryideation.taskTypeChangeIdeeStatus"
		p:taskConfigService-ref="participatoryideation.taskChangeIdeeStatusConfigService" />
</beans>